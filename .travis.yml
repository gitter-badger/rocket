language: c

os:
  - linux

before_script:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install qt; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install sdl; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then wget http://www.un4seen.com/files/bass24-osx.zip -O bass24.zip; fi
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then wget http://www.un4seen.com/files/bass24-linux.zip -O bass24.zip; fi
  - mkdir bass24
  - mkdir examples/include
  - mkdir examples/lib
  - cd bass24
  - unzip ../bass24.zip
  - cp bass.h ../examples/include/
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then cp libbass.dylib ../examples/lib/; fi
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then cp x64/libbass.so ../examples/lib/; fi
  - cd ..

script:
  - make all examples/example_bass examples/example_bass-player

env:
  global:
   - secure: "FdNY3GGU0/oyCGsQZfoumTgwU//FTARCHFgBlf3dBLWRlw4zO0FOuPsXP3Oaem9kY2c57Qn3a/edee+ZHivc/lXjP3Unr8791jR1C1VJV4uernpheIxSETpTfXPP3GQRhLPqCv8gr1n7EIAg2uvnpBrKlZeQVogTNfPkFN5kGG4="

addons:
  apt:
    packages:
      - libsdl1.2-dev
  coverity_scan:
    project:
      name: "kusma/rocket"
      description: "GNU Rocket"
    notification_email: kusmabite@gmail.com
    build_command_prepend: ""
    build_command: "make all examples/example_bass examples/example_bass-player"
    branch_pattern: coverity_scan
